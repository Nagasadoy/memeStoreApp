<script type="module">
    // Import the functions you need from the SDKs you need
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.16.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.16.0/firebase-analytics.js";
    import { getMessaging, getToken, onMessage, } from "https://www.gstatic.com/firebasejs/9.16.0/firebase-messaging.js";
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
        apiKey: "AIzaSyDtLb6c2XGyDX1NZ5lwdmWi6p37d-zGON8",
        authDomain: "mytestfcm-7404d.firebaseapp.com",
        databaseURL: "https://mytestfcm-7404d-default-rtdb.firebaseio.com",
        projectId: "mytestfcm-7404d",
        storageBucket: "mytestfcm-7404d.appspot.com",
        messagingSenderId: "558625884661",
        appId: "1:558625884661:web:b79b440e4e33b04402b8bc",
        measurementId: "G-PX02BYE8XP"
    };
    // //
    // //
    // // // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    // const analytics = getAnalytics(app);
    //
    const messaging = getMessaging(app);
    // //
    // //
    getToken(messaging, { vapidKey: "BAYq9JmlgTtRwqT6mJOIFOAi1X5Nb9nXjQCAvkAHkbGMD30-muTUg4_frXf9aG-n-giQFHUi_s5Udt2xy3LOMmU" }).then((currentToken) => {
        if (currentToken) {
            // Send the token to your server and update the UI if necessary
            // ...
            console.log(currentToken);
        } else {
            // Show permission request UI
            console.log('No registration token available. Request permission to generate one.');
            // ...
        }
    }).catch((err) => {
        console.log('An error occurred while retrieving token. ', err);
        // ...
    });

    // console.log(onMessage);

    // onMessage(messaging, (payload) => {
    //     console.log('Message received. ', payload);
    //     console.log(payload);
    // });
    //
    // console.log('end file');

    // onBackgroundMessage(messaging, (payload) => {
    //     console.log('[firebase-messaging-sw.js] Received background message ', payload);
    //     // Customize notification here
    //     const notificationTitle = 'Background Message Title';
    //     const notificationOptions = {
    //         body: 'Background Message body.',
    //         icon: '/firebase-logo.png'
    //     };
    //
    //     self.registration.showNotification(notificationTitle,
    //         notificationOptions);
    // });
</script>

<h1>{{ data }}</h1>